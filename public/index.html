<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axiom Note - v5.4</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="top-controls">
            <div class="control-group">
                <label for="theme-select">Tema:</label>
                <select id="theme-select">
                    <option value="light">Claro</option>
                    <option value="dark">Oscuro</option>
                </select>
            </div>
        </div>

        <h1>Axiom Note</h1>
        <form id="note-form">
            <div class="form-section">
                <label for="contexto-informe">Contexto del Informe</label>
                <select id="contexto-informe">
                    <option value="urgencias">Urgencias</option>
                    <option value="planta">Ingreso en Planta</option>
                    <option value="evolutivo">Evolutivo de planta</option>
                </select>
            </div>
            
            <div id="urgencias-fields" class="hidden">
                <details open>
                    <summary>Datos del Paciente</summary>
                    <fieldset>
                        <div class="datos-grid">
                            <div><label for="urg-fecha-hora">Fecha y Hora de Llegada</label><input type="datetime-local" id="urg-fecha-hora"></div>
                            <div><label for="urg-nombre">Nombre</label><input type="text" id="urg-nombre"></div>
                            <div><label for="urg-edad">Edad</label><input type="number" id="urg-edad"></div>
                            <div><label for="urg-sexo">Sexo</label><select id="urg-sexo"><option value="Hombre">Hombre</option><option value="Mujer">Mujer</option></select></div>
                            <div id="urg-embarazo-container" class="hidden"><label for="urg-embarazo">Embarazo</label><select id="urg-embarazo"><option value="No">No</option><option value="Sí">Sí</option><option value="No sabe">No sabe</option></select></div>
                            <div><label for="urg-alergias">Alergias</label><input type="text" id="urg-alergias" placeholder="Ej: Penicilina..."></div>
                        </div>
                    </fieldset>
                </details>
                <details>
                    <summary>Evaluación Clínica</summary>
                    <fieldset>
                        <div class="pattern-group"><label for="urg-motivo">Motivo de Consulta</label><textarea id="urg-motivo" placeholder="Dolor torácico opresivo..."></textarea></div>
                        <div class="pattern-group"><label for="urg-triaje">Constantes y Nivel de Triaje</label><textarea id="urg-triaje" placeholder="TA 150/90, FC 110 lpm, SatO2 96%, Nivel II..."></textarea></div>
                        <div class="pattern-group"><label for="urg-historia">Historia Actual</label><textarea id="urg-historia" placeholder="Inicio de síntomas, evolución..."></textarea></div>
                        <div class="pattern-group"><label for="urg-antecedentes">Antecedentes Relevantes</label><textarea id="urg-antecedentes" placeholder="Medicación crónica, tóxicos..."></textarea></div>
                        <div class="pattern-group"><label for="urg-exploracion">Exploración Física</label><textarea id="urg-exploracion" placeholder="Auscultación, palpación, estado neurológico..."></textarea></div>
                    </fieldset>
                </details>
                <details>
                    <summary>Plan y Diagnóstico</summary>
                    <fieldset>
                        <div class="pattern-group"><label for="urg-pruebas">Pruebas Realizadas en Urgencias</label><textarea id="urg-pruebas" placeholder="Resultados de ECG, analítica, test rápidos..."></textarea></div>
                        <div class="pattern-group"><label for="urg-sospecha">Sospecha Diagnóstica</label><textarea id="urg-sospecha" placeholder="Ej: Síndrome Coronario Agudo..."></textarea></div>
                        <div class="pattern-group"><label for="urg-plan">Plan Inmediato y Tratamiento</label><textarea id="urg-plan" placeholder="Ej: Se administra AAS, se solicita analítica..."></textarea></div>
                    </fieldset>
                </details>
            </div>

            <div id="planta-fields" class="hidden">
                <details open>
                    <summary>Información del Paciente</summary>
                    <fieldset>
                        <div class="datos-grid">
                            <div><label for="planta-nombre">Nombre del Paciente</label><input type="text" id="planta-nombre"></div>
                            <div><label for="planta-edad">Edad</label><input type="number" id="planta-edad"></div>
                            <div><label for="planta-sexo">Sexo</label><select id="planta-sexo"><option value="Hombre">Hombre</option><option value="Mujer">Mujer</option></select></div>
                        </div>
                    </fieldset>
                </details>
                <details>
                    <summary>Contexto del Paciente</summary>
                    <fieldset>
                        <div class="pattern-group"><label for="planta-motivo_ingreso">Motivo de Ingreso</label><textarea id="planta-motivo_ingreso" placeholder="Ej: Ingresa desde Urgencias por insuficiencia cardíaca descompensada."></textarea></div>
                        <div class="pattern-group"><label for="planta-alergias">Alergias</label><textarea id="planta-alergias" placeholder="Ej: Penicilina, AINEs, Contrastes Yodados..."></textarea></div>
                        <div class="pattern-group"><label for="planta-antecedentes">Antecedentes Personales</label><textarea id="planta-antecedentes" placeholder="Ej: HTA, DM2 en tto con Metformina, apendicectomía en la infancia."></textarea></div>
                    </fieldset>
                </details>
                <details>
                    <summary>Evaluación Clínica</summary>
                    <fieldset>
                        <div class="pattern-group"><label for="planta-exploracion">Exploración Física</label><textarea id="planta-exploracion" placeholder="Ej: Consciente y orientado. Eupneico. ACR: Tonos rítmicos. AP: Crepitantes en bases. EEII: Edemas con fóvea."></textarea></div>
                        <div class="pattern-group"><label for="planta-pruebas">Resultados de Pruebas Complementarias</label><textarea id="planta-pruebas" placeholder="Ej: Analítica: Leucocitos normales, PCR 45, Pro-BNP elevado. Rx Tórax: Signos de congestión pulmonar."></textarea></div>
                    </fieldset>
                </details>
                <details>
                    <summary>Plan de Actuación</summary>
                    <fieldset>
                        <div class="pattern-group"><label for="planta-tratamiento">Plan de Tratamiento Inicial</label><textarea id="planta-tratamiento" placeholder="Ej: Se inicia tratamiento con diuréticos IV (Furosemida), oxigenoterapia."></textarea></div>
                        <div class="pattern-group"><label for="planta-cuidados">Plan de Cuidados de Enfermería</label><textarea id="planta-cuidados" placeholder="Ej: Monitorización de constantes cada 8h, control de diuresis y balance hídrico, dieta hiposódica."></textarea></div>
                        <div class="pattern-group"><label for="planta-intervenciones">Justificación de Intervenciones</label><textarea id="planta-intervenciones" placeholder="Ej: Se canaliza VVP para sueroterapia. Profilaxis tromboembólica con heparina."></textarea></div>
                    </fieldset>
                </details>
            </div>

            <div id="evolutivo-fields" class="hidden">
                <details open>
                    <summary>Nota de Evolutivo</summary>
                    <fieldset>
                        <div><label for="evo-fecha-hora">Fecha y Hora</label><input type="datetime-local" id="evo-fecha-hora"></div>
                        <div class="pattern-group"><label for="evo-resumen">Resumen del Estado General</label><textarea id="evo-resumen" placeholder="Ej: Paciente estable, afebril, buena tolerancia a la dieta..."></textarea></div>
                        <div class="pattern-group"><label for="evo-cambios">Cambios o Eventos Relevantes</label><textarea id="evo-cambios" placeholder="Ej: Presentó pico febril de 38.5ºC, se extrajo hemocultivo..."></textarea></div>
                        <div class="pattern-group"><label for="evo-plan">Plan a Seguir</label><textarea id="evo-plan" placeholder="Ej: Mantener misma pauta. Pendiente de resultados..."></textarea></div>
                    </fieldset>
                </details>
            </div>

            <button type="button" id="generate-btn">
                <span id="spinner" class="spinner hidden"></span>
                <span id="btn-text">Generar Texto</span>
            </button>

            <div class="result-container">
                <div class="result-header"><h2>Nota de Evolución</h2><button type="button" id="copy-report-btn" class="utility-btn">Copiar Evolución</button></div>
                <textarea id="result-text" placeholder="Aquí aparecerá el informe principal..."></textarea>
                <div class="result-header"><h2>Recomendaciones y Plan</h2><button type="button" id="copy-recs-btn" class="utility-btn">Copiar Recomendaciones</button></div>
                <textarea id="recommendations-text" placeholder="Aquí aparecerán las recomendaciones..."></textarea>
                <div class="result-header"><h3>Resumen (Palabras Clave)</h3><button type="button" id="copy-keywords-btn" class="utility-btn">Copiar Claves</button></div>
                <textarea id="keywords-text" placeholder="Aquí aparecerán las palabras clave del informe..."></textarea>
                
                <div class="export-section">
                    <button type="button" id="copy-all-btn" class="utility-btn">Copiar Informe Completo</button>
                    <button type="button" id="export-pdf-btn" class="utility-btn">Exportar a PDF</button>
                </div>
            </div>
             <div style="margin-top: 20px; text-align: right;">
                  <button type="button" id="clear-btn" class="utility-btn">Limpiar Formulario</button>
            </div>
        </form>
    </div>
    
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="app.js"></script>
</body>
</html>